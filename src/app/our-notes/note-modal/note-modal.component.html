<div class="overlay" *ngIf="data.value === 'active'" (click)="hide()" (afterIf)="loadImage()" [@overlay]="data">

  <form id="popup" class="container" [formGroup]="noteForm" novalidate (click)="$event.stopPropagation()" blFocusMe>
    <h2>
      {{title}}
      <div class="float-right" touchStart>
        <button type="button" mat-stroked-button (idleClick)="cancel($event)">Cancel</button>
        <button type="button" mat-flat-button (idleClick)="save($event)">Save</button>
      </div>
    </h2>

    <div>
      <mat-form-field>
        <input matInput placeholder="Name" formControlName="name" required blFocusMe>
        <div class="text-danger" 
          [hidden]="!submitted || noteForm.controls.name.valid || !noteForm.controls.name.errors.required">
          Entry is mandatory
        </div>
      </mat-form-field>
    </div>

    <div>
      <mat-form-field class="textarea">
        <textarea matInput placeholder="Note" formControlName="text" rows="8" required>
        </textarea>
        <div class="text-danger" 
          [hidden]="!submitted || noteForm.controls.text.valid || !noteForm.controls.text.errors.required">
          Entry is mandatory
        </div>
      </mat-form-field>
    </div>

    <div class="choose-file" touchStart>
      <input-file (files)="fileChanged($event)"></input-file>
    </div>

    <div class="chosen-file">
      <img id="myimg" [hidden]="toHideImg" *ngIf="hasImage">
      <video id="myvideo" [hidden]="toHideImg" *ngIf="hasVideo"></video>
    </div>

  </form>

</div>